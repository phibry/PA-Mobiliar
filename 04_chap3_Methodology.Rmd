---
output: pdf_document
---

## 3. Methodology

In this section models were created trying to outperform the buy and hold strategy.
starting with the usage of the simplest models , diffrent aproaches were chosen to fullfill the goal.



### 3.1. Time-Series Analysis {#ts-analysis}

Plots of the timeseries, decomposition. Stationarity (refer to the theory section)

### 3.2 using simple methods
### 3.2.1 sma signals to trade 


```{r chap3.2 ma crossover, echo=FALSE, fig.cap="conversion data"}

load("data/data_mobi") 
n=20
# lentgths
n1=10
n2 =50
k=2

mobidat= data[,4] # chose the row and horizon
start="2015-10-30"
end="2020-04-30"


horizon=paste(start,"::",end,sep = "")


sma1 <-SMA(mobidat,n=n1)
sma2 <-SMA(mobidat,n=n2)


signal <-rep(0,length(sma1))

signal[which(sma1>sma2&lag(sma1)<lag(sma2))]<-1
signal[which(sma1<sma2&lag(sma1)>lag(sma2))]<--1

signal[which(sma1>sma2)]<-1
signal[which(sma1<sma2)]<--1

signal=reclass(signal,sma1)



chartSeries(mobidat,subset=horizon,theme=chartTheme("white"),name= "sna",type="")
addSMA(n=n1,on=1,col = "blue")
addSMA(n=n2,on=1,col = "red")
addTA(signal,type="S",col="red")


trade   =   Lag(signal[horizon],1)
return  =   diff(log(mobidat))
ret = return*trade

mean(ret,na.rm=T)
names(ret)="filter"

chart.Bar(ret,main="returns daily")
chart.CumReturns(ret, main="Naive Rule: Cum Returns")
chart.Drawdown(ret,main="Naive Rule: Percentage Drawdown")
charts.PerformanceSummary(ret, main="Naive Buy Rule")
```




